(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,a){e.exports=a(19)},16:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),s=(a(16),a(17),function(e){return r.a.createElement("header",{className:"top col-12"},r.a.createElement("h1",null,"Retrospective"))}),i=a(1),l=a.n(i),p=a(10),d=a(3),u=a(4),m=a(6),h=a(5),f=a(7),y=a(2),v=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).updateField=r.a.createRef(),a.openEditForm=function(e){var t=!a.state.showInput;a.setState({showInput:t})},a.editCard=function(e,t){e.preventDefault(),fetch("https://guarded-spire-19484.herokuapp.com/edit/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"update=".concat(a.updateField.current.value)}).then((function(){a.setState({cardContent:a.updateField.current.value}),a.updateField.current.value="",a.setState({showInput:!1})}))},a.fetchLikesCount=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.state.likesCount+1,a.setState({likesCount:t}),n.prev=2,n.next=5,l.a.awrap(fetch("https://guarded-spire-19484.herokuapp.com/updatelikes/".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({likes:a.state.likesCount})}));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("Error",n.t0);case 10:case"end":return n.stop()}}),null,null,[[2,7]])},a.deleteCard=function(e){fetch("https://guarded-spire-19484.herokuapp.com/deletecard/".concat(e),{method:"DELETE"}).then((function(){a.props.displayUpdatedCards(e)}))},a.state={showInput:!1,likesCount:0,cardContent:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({likesCount:this.props.likes,cardContent:this.props.cardContent})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{backgroundColor:this.props.color},className:"card"},this.state.cardContent,r.a.createElement("div",{className:"options-container"},r.a.createElement(y.b,{className:"icon edit-icon",color:"white",onClick:this.openEditForm,id:"edit"}),r.a.createElement(y.c,{onClick:function(t){e.deleteCard(e.props.id)},className:"icon trash-icon",color:"white"}),r.a.createElement(y.a,{onClick:function(){e.fetchLikesCount(e.props.id)},className:"icon heart-icon",color:"white"}),r.a.createElement("span",{style:{color:"white"}},this.state.likesCount)),r.a.createElement("form",{onSubmit:function(t){return e.editCard(t,e.props.id)}},r.a.createElement("input",{placeholder:"Editar tarjeta",style:{borderColor:this.props.color},className:"form-update ".concat(this.state.showInput?"d-block":"d-none"),type:"text",ref:this.updateField,name:"update"})))}}]),t}(r.a.Component),k=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).contentRef=r.a.createRef(),e.categoryRef=r.a.createRef(),e.shouldDisplayForm=function(t){var a=!e.state.displayForm;e.setState({displayForm:a})},e.createCard=function(t){var a,n,r,o;return l.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t.preventDefault(),c.prev=1,c.next=4,l.a.awrap(fetch("https://guarded-spire-19484.herokuapp.com/createcard",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({content:e.contentRef.current.value,category:e.categoryRef.current.value,likes:0,color:e.props.color})}));case 4:return a=c.sent,c.next=7,l.a.awrap(a.json());case 7:n=c.sent,r={_id:n._id,content:e.contentRef.current.value,category:e.categoryRef.current.value,likes:0,color:e.props.color},o=[].concat(Object(p.a)(e.state.items),[r]),e.setState({items:o,displayForm:!1}),e.contentRef.current.value="",c.next=17;break;case 14:c.prev=14,c.t0=c.catch(1),console.error("Error:",c.t0);case 17:case"end":return c.stop()}}),null,null,[[1,14]])},e.displayUpdatedCards=function(t){var a=e.state.items.filter((function(e){return e._id===t&&(e=null),e}));e.setState({items:a})},e.state={items:[],displayForm:!1},e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://guarded-spire-19484.herokuapp.com/getcard/"+this.props.category).then((function(e){return e.json()})).then((function(t){e.setState({items:t})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-4 action-container"},r.a.createElement("h2",null,this.props.niceName),r.a.createElement("div",{className:"add-card-span",onClick:this.shouldDisplayForm},"+"),r.a.createElement("form",{className:"form-create ".concat(this.state.displayForm?"d-block":"d-none"),onSubmit:this.createCard},r.a.createElement("input",{placeholder:"Escribir el contenido de la tarjeta",type:"text",className:"input-create",style:{borderColor:this.props.color},ref:this.contentRef,name:"content"}),r.a.createElement("input",{type:"hidden",name:"category",ref:this.categoryRef,value:this.props.category})),r.a.createElement("div",{className:"cards-container"},this.state.items.map((function(t){return r.a.createElement(v,{displayUpdatedCards:e.displayUpdatedCards,likes:t.likes,color:t.color,cardContent:t.content,id:t._id,key:t._id})}))))}}]),t}(r.a.Component);var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(k,{color:"orchid",niceName:"Kudos",category:"kudos"}),r.a.createElement(k,{color:"salmon",niceName:"To Improve",category:"toImprove"}),r.a.createElement(k,{color:"aquamarine",niceName:"Went Well",category:"wentWell"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.b6bbd4c0.chunk.js.map